<div class="sidebar-widget">
    <h3>Recent Posts</h3>
    <ul class="recent-posts-list">
        {{ $now := now.Unix }}
        {{ range first 10 (where site.RegularPages "Type" "posts") }}
        {{ $isNew := false }}
        {{ if .Date }}
          {{ $daysSince := div (sub $now .Date.Unix) 86400 }}
          {{ if lt $daysSince 7 }}
            {{ $isNew = true }}
          {{ end }}
        {{ end }}
        <li>
            <a href="{{ .RelPermalink }}">
                <div class="post-title-wrapper">
                    <span class="post-title">{{ .Title }}</span>
                    {{ if $isNew }}
                    <span class="post-badge">NEW</span>
                    {{ end }}
                </div>
                <time class="post-date">{{ .Date.Format "2006-01-02" }}</time>
            </a>
        </li>
        {{ end }}
    </ul>
</div>
